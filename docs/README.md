# ⚾️ 우아한테크코스 2주차 미션 - 숫자 야구

## 🚀 숫자 야구 미션 목표

1. 함수 분리에 익숙해질 수 있다.
2. 함수별로 테스트를 작성할 수 있다.

---

## ➕ 추가된 요구 사항

1. indent depth를 3이 넘지 않도록 구현하다. 2까지만 허용한다.
2. 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
3. Jset를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

---

## 📉 숫자 야구의 흐름

1. 게임시작 문구가 출력되며 게임이 시작된다.
2. 컴퓨터는 1부터 9까지 서로 다른 수로 이루어진 3자리의 수를 선택한다.
3. 숫자입력 문구가 출력되며 게임 플레이어는 3자리의 숫자를 입력한다.
4. 게임 플레이어가 잘못된 값을 입력한 경우 예외를 발생시킨 후 애플리케이션을 종료한다.
   - 3자리 숫자를 입력하지 않은 경우
   - 같은 숫자를 반복하여 입력한 경우
   - 0를 입력한 경우
5. 게임 플레이어가 입력한 3자리의 숫자에 따라 결과를 출력한다.
   - 낫싱: 컴퓨터가 선택한 3자리의 수가 하나도 없는 경우
   - 볼: 컴퓨터가 선택한 3자리의 수와 같은 수가 다른 자리에 있는 경우
   - 스트라이크: 컴퓨터가 선택한 3자리의 수와 같은 수가 같은 자리에 있는 경우
   - 이때 볼이 스트라이크보다 앞에 나온다.
6. 3개의 숫자를 모두 맞힐 경우 게임 종료 문구가 출력된다. 그렇지 않을 경우 3~5번을 반복한다.
7. 게임 종료 후, 재시작 또는 완전히 종료할 수 있는 선택지를 출력한다.
   - 1: 게임 재시작
   - 2: 완전히 종료
   - 그 외의 경우: 경고 문구 출력
8. 게임 재시작 버튼을 누르면 게임 시작 문구가 출력되며 게임이 새롭게 시작된다.
9. 완전히 종료가 되면 서버가 종료된다.

---

## 📃 기능 목록

### 0️⃣ 전체적인 흐름 작성하기

- [x] docs: 숫자 야구 구현을 위한 기능 목록 작성하기
- [x] chore: 전체적인 흐름을 주석으로 작성하기

---

### 1️⃣ 숫자 야구 시작하기

- [x] feat: 게임시작 문구를 출력하는 함수 만들기
  - **MissionUtils 라이브러리**에서 제공하는 `Console` API를 사용한다.
- [x] test: 게임시작 문구 출력 함수를 위한 테스트 작성
- [x] feat: 임의의 3자리 숫자를 선택하는 함수 만들기
  - **MissionUtils 라이브러리**에서 제공하는 `Random` API를 사용한다.
- [x] feat: MissionUtils 라이브러리의 다른 메서드로 임의의 3자리 숫자를 선택하기
  - 추가된 요구 사항을 유심히 보면 사용된 메서드가 다르다.
  - 현재는 pickUniqueNumbersInRange()메서드를 사용한다.
  - 이를 pickNumberInRange()메서드로 바꾸어 다시 구현한다.
- [x] test: 임의의 3자리 숫자 선택 함수를 위한 테스트 작성
  - 0이 포함되어 있지 않은지 확인하기
  - 3자리의 숫자인지 확인하기

---

### 2️⃣ 숫자 야구 진행하기

- 게임 진행 함수 만들기 1 - 숫자 야구 진행하기
  - [x] feat: 숫자입력 문구를 출력하기
    - 숫자 입력 문구는 게임 플레이어가 답변을 입력할 수 있어야 한다.
    - 숫자 입력 문구는 답변을 인수로 전달하는 콜백함수를 호출한다.
    - 게임 플레이어가 답변을 입력할 때까지 기다린다.
    - **MissionUtils 라이브러리**에서 제공하는 `Console` API를 사용한다.
  - [x] feat: 게임 플레이어의 답변이 올바른지 검사하는 함수 만들기
    - 3자리 숫자를 입력하지 않은 경우, 같은 숫자를 반복하여 입력한 경우, 0를 입력한 경우 `false`를 반환한다.
    - 또한 숫자가 아닌 값을 입력하여도 `false`를 반환한다.
    - 그렇지 않은 경우 `true`를 반환한다.
  - [x] test: 게임 플레이어의 답변이 올바른지 검사하는 함수를 위한 테스트 작성
  - [x] feat: 플레이어의 답변이 올바른 형식이 아니라면 애플리케이션 강제 종료하기
    - `throw`문을 사용해 예외를 발생시킨후 애플리케이션은 종료한다.
  - [x] feat: 게임 플레이어의 답변과 컴퓨터의 정답을 비교하여 결과를 반환하는 함수 만들기
    - 낫싱: 컴퓨터가 선택한 3자리의 수가 하나도 없는 경우
    - 볼: 컴퓨터가 선택한 3자리의 수와 같은 수가 다른 자리에 있는 경우
    - 스트라이크: 컴퓨터가 선택한 3자리의 수와 같은 수가 같은 자리에 있는 경우
    - 이때 볼이 스트라이크보다 앞에 나온다.
    - 객체의 형태로 만들기(키: 볼 또는 스트라이크, 값: 키에 해당하는 결과의 개수)
  - [x] test: 게임의 결과를 반환하는 함수를 위한 테스트 작성
  - [x] feat: 게임결과 문구를 출력하는 함수 만들기
    - 결과값이 담긴 객체를 매개변수로 받는다.
    - 객체의 키에 해당하는 값을 바탕으로 출력 문구를 만든다.
    - 모든 키의 값이 0이라면 낫싱을 출력하는 문구를 만든다.
    - **MissionUtils 라이브러리**에서 제공하는 `Console` API를 사용한다.
  - [x] test: 게임결과 문구를 출력 함수를 위한 테스트 작성
  - [x] feat: 게임결과 문구가 3스트라이크라면 게임 종료 문구를 함께 출력하기
    - 플레이어가 모든 숫자를 맞추면 3스트라이크가 출력된다.
    - 이때 "3개의 숫자를 모두 맞히셨습니다! 게임 종료"도 함께 출력된다.
  - [x] feat: 플레이어의 답변이 틀리면 다시 숫자입력 문구를 출력하기
    - 3스트라이크가 아니라면 틀린 답변이다.
    - 플레이어의 답변이 맞을 때 까지 반복한다.
  - [x] feat: 게임종료 문구를 출력하는 함수 만들기
    - 게임 종료는 게임 결과가 3스트라이크일 때 실행된다.
    - 게임 플레이어에게 질문을 던진다. 질문의 내용은 재시작할 것인지, 완전히 종료할 것인지이다.
    - 구체적인 질문은 아래와 같다.
    - 게임을 새로 시작하려면 1, 종료하려면 2를 입력하세요.
    - **MissionUtils 라이브러리**에서 제공하는 `Console` API를 사용한다.
  - [x] feat: 게임 플레이어의 답변이 올바른지 검사하는 함수 만들기
    - 1과 2를 제외한 답변은 올바른 형식이 아니다.
  - [x] test: 게임 플레이어의 답변이 올바른지 검사하는 함수를 위한 테스트 작성
  - [x] feat: 플레이어의 답변이 올바른 형식이 아니라면 애플리케이션 강제 종료하기
    - `throw`문을 사용해 예외를 발생시킨후 애플리케이션은 종료한다.

---

### 3️⃣ 숫자 야구 재시작하기

- 게임 진행 함수 만들기 2 - 재시작하기
  - [x] feat: 숫자 야구를 재시작하는 함수 만들기
    - 숫자 야구가 재시작하는 조건은 다음과 같다.
    - 게임 종료 후 1번을 선택한 경우

---

### 4️⃣ 숫자 야구 완전히 종료하기

- 게임 진행 함수 만들기 3 - 완전히 종료하기
  - [x] feat: 숫자 야구를 완전히 종료하는 함수 만들기
    - 숫자 야구가 완전히 종료되는 조건은 다음과 같다.
    - 게임 종료 후 2번을 선택한 경우
    - 해당 함수는 강제로 종료하는 것이 아니기 때문에 예외를 발생시키지 않는다.
    - **MissionUtils 라이브러리**에서 제공하는 `Console` API를 사용한다.

---

### 5️⃣ 리팩토링

- [x] refactor: 함수(메서드) 이동하기
  - 함수(메서드)의 성격에 맞게 이동한다.
  - App 클래스는 전체적인 게임의 흐름을 담당한다.
  - game 객체는 게임 진행에 필요한 함수를 담당한다.
  - validation 객체는 유효성 검사에 필요한 함수를 담당한다.
- [x] refactor: 변수명, 함수명 수정하기
  - 함수(메서드) 또는 변수가 하는 역할에 따라 변수명을 수정한다.
  - 이름을 통해 의도를 나타내며 축약하여 작성하지 않도록 한다.
- [x] refactor: 함수 분리하기
  - 게임을 재시작하는 함수를 분리한다.
- [x] refactor: 매직 넘버 상수화하기
  - 의미를 가지는 매직 넘버를 상수화한다.
  - const.js 파일을 만들어 상수화된 변수를 관리한다.
- [x] refactor: if문 대신 배열 메서드 사용하기
  - playerInput를 검사하는 함수 내에서 if문 대신 array.every()을 사용하여 유효성을 검사한다.
- [x] refactor: 함수의 반환값 하나로 통일하기
  - game.quitWithException() 메서드는 에러를 생성한 후 종료를 시키기 때문에 반환하지 않는다.
  - App 클래스의 progress() 메서드와 end() 메서드는 App의 메서드를 반환한다.
  - game.printResult() 메서드는 아무런 값을 반환하지 않는다.
- [x] refactor: validation.option() else 제거하기

---

### 6️⃣ 테스트

- [x] test: App class의 start() 테스트 코드 수정하기
- [x] test: game.getAnswer() 테스트 코드 수정 및 추가하기
- [x] test: game.getResult() 테스트 코드 수정 및 추가하기
- [x] test: game.printResult() 테스트 코드 수정하기
- [x] test: validation.playerInput() 테스트 코드 수정 및 추가하기
- [x] test: validation.option() 테스트 코드 수정하기

---

## 📃 리팩터링

### 🍢 클래스(또는 객체) 분리하기

- [ ] refactor: View를 담당하는 클래스(또는 객체) 분리하기
  - View 폴더에서 관리한다.
  - OutputView 클래스를 만들어 메시지 출력을 관리한다.
  - OutputView 클래스에서 게임의 결과 메시지를 출력한다.
  - InputView 클래스에서 사용자의 번호 입력 메시지 출력을 담당하는 메서드를 만든다.
- [ ] refactor: Model를 담당하는 클래스(또는 객체) 분리하기
  - ComputerAnswer 클래스에서 컴퓨터의 정답 관련 필드와 메서드를 만든다.
    - setValue, comparePlayerAnswer, resetValue
  - Validator 클래스에서 유효성 검사를 진행한다.
  - Validator 클래스에서 유효성 검사가 실패할 경우 애플리케이션을 종료한다.
- [ ] refactor: Controller를 담당하는 클래스(또는 객체) 분리하기
  - GameManager 클래스체서 게임 진행을 담당한다.
- [x] refactor: 게임 종료를 담당하는 객체를 만들어 분리하기

---

### 🎯 프로그래밍 요구 사항 지키기

- [ ] refactor: indent depth 3이 넘지 않도록 구현하기
- [ ] refactor: else 지양하기
- [ ] refactor: 함수의 길이가 10라인을 넘어가지 않도록 구현하기
  - 함수가 한 가지 일만 하도록 최대한 작게 만들기
  - 플레이어의 입력에 따른 행동 분리하기
- [ ] refactor: 파라미터 개수는 최대 3개까지만 허용하기

---

### 👾 테스트 코드 작성

- [ ] test: 도메인 로직에 단위 테스트 구현하기
- [ ] test: UI를 담당하는 로직 구현하기
